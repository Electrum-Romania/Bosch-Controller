<!-- HTML header for doxygen 1.9.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>controller: Raspberry Pi controller</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">controller
   </div>
   <div id="projectbrief">controller project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Raspberry Pi controller </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a></p>
<p >The controller program is Electrum's solution to control the car in the Bosch Future Mobility Challenge. It is a C++ application built from the ground up, based on what we call a frame system. It uses the OpenCV and sockpp libraries. It is set apart by its ability to communicate with our web debugger which allow it to change its parameters on the fly.</p>
<h1><a class="anchor" id="design"></a>
Design</h1>
<p >The structure of the <code>controller</code> is based around the concepts of frames and tasks. A frame represents a set of input data (an image from the camera feed, data from the proximity sensors) as well as all the processing done on that data (such as the lanes or traffic signs detected in the image). All the data related to a frame is stored in a structure called <code><a class="el" href="struct_pdata.html" title="Frame data.">Pdata</a></code>. The process of computing a frame is the process of filling the <code><a class="el" href="struct_pdata.html" title="Frame data.">Pdata</a></code> structure with raw and processed data, then outputing the relevant information from the structure to the Nucleo board and other ouputs.</p>
<p >Tasks are classes that work with the <code><a class="el" href="struct_pdata.html" title="Frame data.">Pdata</a></code> structure. There are <code><a class="el" href="class_i_otask.html" title="Base class for input/output tasks.">IOtask</a></code>s (sensors and sinks) and <code><a class="el" href="class_ptask.html">Ptask</a></code>s. Sensors fill <code><a class="el" href="struct_pdata.html" title="Frame data.">Pdata</a></code> with data from external sources (eg the camera video feed). <code><a class="el" href="class_ptask.html">Ptask</a></code>s fill <code><a class="el" href="struct_pdata.html" title="Frame data.">Pdata</a></code> by processing already computed data (eg traffic sign recognition). Finally, sinks take the fully filled <code><a class="el" href="struct_pdata.html" title="Frame data.">Pdata</a></code> and output parts of it to consumers outside the program (eg Nucleo board, camera feed, debug information).</p>
<p ><code>controller</code> is a concurrent, multithreaded program. Each <code><a class="el" href="class_i_otask.html" title="Base class for input/output tasks.">IOtask</a></code> runs in its own thread and all <code><a class="el" href="class_ptask.html">Ptask</a></code>s run in a thread pool taking full advantage of the number of cpu process cores. Tasks are part of a group called a layer. All tasks in a layer run in parallel. After all tasks in a layer have finished running, the tasks in the next layer are run, and so on. The sensors and sinks form the first and last layers of the sequence, and the <code><a class="el" href="class_ptask.html">Ptask</a></code>s are grouped in layers numbered from 1 to n. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
